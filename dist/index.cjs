"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const k=require("react");function bt(e,t){for(let n in e)t(e[n],n)}function M(e,t){e.forEach(t)}function P(e,t){if(!e)throw Error(t)}function $({node:e=[],from:t,source:n,parent:r=t||n,to:a,target:u,child:o=a||u,scope:v={},meta:g={},family:d={type:"regular"},regional:S}={}){let c=ue(r),p=ue(d.links),i=ue(d.owners),s=[];M(e,f=>f&&D(s,f));let l={id:Tt(),seq:s,next:ue(o),meta:g,scope:v,family:{type:d.type||"crosslink",links:p,owners:i}};return M(p,f=>D(he(f),l)),M(i,f=>D(Se(f),l)),M(c,f=>D(f.next,l)),S&&G&&Ne(X(G),[l]),l}function ee(e,t,n){let r,a=T,u=null,o=O;if(e.target&&(t=e.params,n=e.defer,r=e.meta,a="page"in e?e.page:a,e.stack&&(u=e.stack),o=I(e)||o,e=e.target),o&&O&&o!==O&&(O=null),Array.isArray(e))for(let s=0;s<e.length;s++)N("pure",a,C(e[s]),u,t[s],o,r);else N("pure",a,C(e),u,t,o,r);if(n&&!se)return;let v,g,d,S,c,p,i={isRoot:se,currentPage:T,scope:O,isWatch:ce,isPure:fe};se=0;e:for(;S=Gt();){let{idx:s,stack:l,type:f}=S;d=l.node,T=c=l.page,O=I(l),c?p=c.reg:O&&(p=O.reg);let b=!!c,R=!!O,w={fail:0,scope:d.scope};v=g=0;for(let m=s;m<d.seq.length&&!v;m++){let _=d.seq[m];if(_.order){let{priority:h,barrierID:y}=_.order,E=y?c?`${c.fullID}_${y}`:y:0;if(m!==s||f!==h){y?Re.has(E)||(Re.add(E),Ve(m,l,h,y)):Ve(m,l,h);continue e}y&&Re.delete(E)}switch(_.type){case"mov":{let y,E=_.data;switch(E.from){case re:y=X(l);break;case"a":case"b":y=l[E.from];break;case"value":y=E.store;break;case"store":if(p&&!p[E.store.id])if(b){let A=vt(c,E.store.id);l.page=c=A,A?p=A.reg:R?(F(O,E.store,0,1,E.softRead),p=O.reg):p=void 0}else R&&F(O,E.store,0,1,E.softRead);y=pt(p&&p[E.store.id]||E.store)}switch(E.to){case re:l.value=y;break;case"a":case"b":l[E.to]=y;break;case"store":Ft(c,O,d,E.target).current=y}break}case"compute":let h=_.data;if(h.fn){ce=L(d,"op")==="watch",fe=h.pure;let y=h.safe?(0,h.fn)(X(l),w.scope,l):Ut(w,h.fn,l);h.filter?g=!y:l.value=y,ce=i.isWatch,fe=i.isPure}}v=w.fail||g}if(!v){let m=X(l),_=I(l);if(M(d.next,h=>{N("child",c,h,l,m,_)}),_){L(d,"needFxCounter")&&N("child",c,_.fxCount,l,m,_),L(d,"storeChange")&&N("child",c,_.storeChange,l,m,_),L(d,"warnSerialize")&&N("child",c,_.warnSerializeNode,l,m,_);let h=_.additionalLinks[d.id];h&&M(h,y=>{N("child",c,y,l,m,_)})}}}se=i.isRoot,T=i.currentPage,O=I(i)}function Rt(e,t){let n,r,a=e;if(t){let u=xt(t);e.length===0?(n=u.path,r=u.fullName):(n=u.path.concat([e]),r=u.fullName.length===0?e:u.fullName+"/"+e)}else n=e.length===0?[]:[e],r=e;return{shortName:a,fullName:r,path:n}}function Q(e,...t){let n=ft();if(n){let r=n.handlers[e];if(r)return r(n,...t)}}function x(e,t){let n=K({or:t,and:typeof e=="string"?{name:e}:e}),r=(o,...v)=>(ne(!L(r,"derived"),"call of derived event","createEvent"),ne(!fe,"unit call from pure function","operators like sample"),T?((g,d,S,c)=>{let p=T,i=null;if(d)for(i=T;i&&i.template!==d;)i=B(i);et(i);let s=g.create(S,c);return et(p),s})(r,a,o,v):r.create(o,v)),a=ft(),u=Object.assign(r,{graphite:$({meta:St("event",r,n),regional:1}),create:o=>(ee({target:r,params:o,scope:O}),o),watch:o=>ht(r,o),map:o=>Ae(r,te,o,[q()]),filter:o=>Ae(r,"filter",o.fn?o:o.fn,[q(Be,1)]),filterMap:o=>Ae(r,"filterMap",o,[q(),H(v=>!z(v),1)]),prepend(o){let v=x("* → "+r.shortName,{parent:B(r)});return Q("eventPrepend",C(v)),We(v,r,[q()],"prepend",o),Yt(r,v),v}});return n!=null&&n.domain&&n.domain.hooks.event(u),u}function Ye(e,t,n,r){return $t(n,t,"first argument"),P(V(r),"second argument should be a function"),ne(!L(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),M(Array.isArray(n)?n:[n],a=>{e.off(a),pe(e).set(a,mt(yt(a,e,"on",Nt,r)))}),e}function Ie(e,t){let n=K(t),r=qt(e),a=x({named:"updates",derived:1});Q("storeBase",r);let u=r.id,o={subscribers:new Map,updates:a,defaultState:e,stateRef:r,getState(){let s,l=r;if(T){let f=T;for(;f&&!f.reg[u];)f=B(f);f&&(s=f)}return!s&&O&&(F(O,r,1),s=O),s&&(l=s.reg[u]),pt(l)},setState:s=>ee({target:o,params:s,defer:1,scope:O}),reset:(...s)=>(M(s,l=>Ye(o,".reset",l,()=>o.defaultState)),o),on:(s,l)=>Ye(o,".on",s,l),off(s){let l=pe(o).get(s);return l&&(l(),pe(o).delete(s)),o},map(s,l){let f,b;j(s)&&(f=s,s=s.fn),ne(z(l),"second argument of store.map","updateFilter");let R=o.getState();z(R)||(b=s(R,l));let w=Ie(b,{name:`${o.shortName} → *`,derived:1,and:f}),m=yt(o,w,te,Xe,s);return Wt(de(w),{type:te,fn:s,from:r}),de(w).noInit=1,Q("storeMap",r,m),w},watch(s,l){if(!l||!Pe(s)){let f=ht(o,s);return Q("storeWatch",r,s)||s(o.getState()),f}return P(V(l),"second argument should be a function"),s.watch(f=>l(o.getState(),f))}},v=St("store",o,n),g=o.defaultConfig.updateFilter;o.graphite=$({scope:{state:r,fn:g},node:[H((s,l,f)=>(f.scope&&!f.scope.reg[r.id]&&(f.b=1),s)),jt(r),H((s,l,{a:f,b})=>!z(s)&&(s!==f||b),1),g&&q(Xe,1),ge({from:re,target:r})],child:a,meta:v,regional:1});let d=L(o,"serialize"),S=L(o,"derived"),c=d==="ignore",p=!d||c?0:d,i=L(o,"sid");return i&&(c||Z(o,"storeChange",1),r.sid=i,p&&(r.meta={...r==null?void 0:r.meta,serialize:p})),i||c||S||Z(o,"warnSerialize",1),P(S||!z(e),"current state can't be undefined, use null instead"),Ne(o,[a]),n!=null&&n.domain&&n.domain.hooks.store(o),S||(o.reinit=x(),o.reset(o.reinit)),o}function At(){let e={};return e.req=new Promise((t,n)=>{e.rs=t,e.rj=n}),e.req.catch(()=>{}),e}function st(e,t){let n=K(V(e)?{handler:e}:e,t),r=x(V(e)?{handler:e}:e,t),a=C(r);Z(a,"op",r.kind="effect"),r.use=i=>(P(V(i),".use argument should be a function"),S.scope.handler=i,r),r.use.getCurrent=()=>S.scope.handler;let u=r.finally=x({named:"finally",derived:1}),o=r.done=u.filterMap({named:"done",fn({status:i,params:s,result:l}){if(i==="done")return{params:s,result:l}}}),v=r.fail=u.filterMap({named:"fail",fn({status:i,params:s,error:l}){if(i==="fail")return{params:s,error:l}}}),g=r.doneData=o.map({named:"doneData",fn:({result:i})=>i}),d=r.failData=v.map({named:"failData",fn:({error:i})=>i}),S=$({scope:{handlerId:L(a,"sid"),handler:r.defaultConfig.handler||(()=>P(0,`no handler used in ${r.getType()}`))},node:[H((i,s,l)=>{let f=s,b=f.handler;if(I(l)){let R=I(l).handlers[f.handlerId];R&&(b=R)}return i.handler=b,i},0,1),H(({params:i,req:s,handler:l,args:f=[i]},b,R)=>{let w=Qt(R),m=rt(i,s,1,u,R,w),_=rt(i,s,0,u,R,w),[h,y]=Jt(l,_,f);h&&(j(y)&&V(y.then)?y.then(m,_):m(y))},0,1)],meta:{op:"fx",fx:"runner"}});a.scope.runner=S,D(a.seq,H((i,{runner:s},l)=>{let f=B(l)?{params:i,req:{rs(b){},rj(b){}}}:i;return l.meta||(l.meta={fxID:Ct()}),ee({target:s,params:f,defer:1,scope:I(l),meta:l.meta}),f.params},0,1)),r.create=i=>{let s=At(),l={params:i,req:s};if(O&&!ce){let f=O;s.req.finally(()=>{Ht(f)}).catch(()=>{})}return ee({target:r,params:l,scope:O}),s.req};let c=r.inFlight=Ie(0,{serialize:"ignore"}).on(r,i=>i+1).on(u,i=>i-1).map({fn:i=>i,named:"inFlight"});Z(u,"needFxCounter","dec"),Z(r,"needFxCounter",1);let p=r.pending=c.map({fn:i=>i>0,named:"pending"});return Ne(r,[u,o,v,g,d,p,c]),n!=null&&n.domain&&n.domain.hooks.effect(r),r}let Lt=typeof Symbol<"u"&&Symbol.observable||"@@observable",te="map",re="stack",C=e=>e.graphite||e,he=e=>e.family.owners,Se=e=>e.family.links,de=e=>e.stateRef,X=e=>e.value,pe=e=>e.subscribers,B=e=>e.parent,I=e=>e.scope,L=(e,t)=>C(e).meta[t],Z=(e,t,n)=>C(e).meta[t]=n,xt=e=>e.compositeName,Pe=e=>(V(e)||j(e))&&"kind"in e;const ie=e=>t=>Pe(t)&&t.kind===e;let $e=ie("store"),kt=ie("event"),Je=ie("effect"),lt=ie("domain"),Mt=ie("scope");var Vt={__proto__:null,unit:Pe,store:$e,event:kt,effect:Je,domain:lt,scope:Mt,attached:e=>Je(e)&&L(e,"attached")==1};let le=(e,t)=>{let n=e.indexOf(t);n!==-1&&e.splice(n,1)},D=(e,t)=>e.push(t),ne=(e,t,n)=>!e&&console.error(`${t} is deprecated${n?`, use ${n} instead`:""}`);const ye=()=>{let e=0;return()=>""+ ++e};let Dt=ye(),ct=ye(),Tt=ye(),Ct=ye(),G=null,ft=()=>G,It=e=>(e&&G&&G.sidRoot&&(e=`${G.sidRoot}|${e}`),e),Ne=(e,t)=>{let n=C(e);M(t,r=>{let a=C(r);n.family.type!=="domain"&&(a.family.type="crosslink"),D(he(a),n),D(Se(n),a)})},ue=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(C),j=e=>typeof e=="object"&&e!==null,V=e=>typeof e=="function",z=e=>e===void 0,Pt=e=>P(j(e)||V(e),"expect first argument be an object");const Qe=(e,t,n,r)=>P(!(!j(e)&&!V(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${n} to be a unit (store, event or effect)${r}`);let $t=(e,t,n)=>{Array.isArray(e)?M(e,(r,a)=>Qe(r,t,`${a} item of ${n}`,"")):Qe(e,t,n," or array of units")},Xe=(e,{fn:t},{a:n})=>t(e,n),Nt=(e,{fn:t},{a:n})=>t(n,e),Be=(e,{fn:t})=>t(e);const dt=(e,t,n,r)=>{let a={id:ct(),type:e,data:t};return n&&(a.order={priority:n},r&&(a.order.barrierID=++Bt)),a};let Bt=0,ge=({from:e="store",store:t,target:n,to:r=n?"store":re,batch:a,priority:u})=>dt("mov",{from:e,store:t,to:r,target:n},u,a),oe=({fn:e,batch:t,priority:n,safe:r=0,filter:a=0,pure:u=0})=>dt("compute",{fn:e,safe:r,filter:a,pure:u},n,t),je=({fn:e})=>oe({fn:e,priority:"effect"}),H=(e,t,n)=>oe({fn:e,safe:1,filter:t,priority:n&&"effect"}),jt=(e,t,n)=>ge({store:e,to:t?re:"a",priority:n&&"sampler",batch:1}),q=(e=Be,t)=>oe({fn:e,pure:1,filter:t}),zt={mov:ge,compute:oe,filter:({fn:e,pure:t})=>oe({fn:e,filter:1,pure:t}),run:je},qt=e=>({id:ct(),current:e}),pt=({current:e})=>e,Wt=(e,t)=>{e.before||(e.before=[]),D(e.before,t)},W=null;const ze=(e,t)=>{if(!e)return t;if(!t)return e;let n;return(e.v.type===t.v.type&&e.v.id>t.v.id||De(e.v.type)>De(t.v.type))&&(n=e,e=t,t=n),n=ze(e.r,t),e.r=e.l,e.l=n,e},qe=[];let Ze=0;for(;Ze<6;)D(qe,{first:null,last:null,size:0}),Ze+=1;const Gt=()=>{for(let e=0;e<6;e++){let t=qe[e];if(t.size>0){if(e===3||e===4){t.size-=1;let r=W.v;return W=ze(W.l,W.r),r}t.size===1&&(t.last=null);let n=t.first;return t.first=n.r,t.size-=1,n.v}}},N=(e,t,n,r,a,u,o)=>Ve(0,{a:null,b:null,node:n,parent:r,value:a,page:t,scope:u,meta:o},e),Ve=(e,t,n,r=0)=>{let a=De(n),u=qe[a],o={v:{idx:e,stack:t,type:n,id:r},l:null,r:null};a===3||a===4?W=ze(W,o):(u.size===0?u.first=o:u.last.r=o,u.last=o),u.size+=1},De=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},Re=new Set;let O,se=1,ce=0,fe=0,T=null,Ht=e=>{O=e},et=e=>{T=e};const vt=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=B(e);if(e)return e}return null};let Ft=(e,t,n,r,a)=>{let u=vt(e,r.id);return u?u.reg[r.id]:t?(F(t,r,a),t.reg[r.id]):r};const Kt=e=>e;let F=(e,t,n,r,a)=>{var u;let o=e.reg,v=t.sid,g=t==null||(u=t.meta)===null||u===void 0?void 0:u.serialize;if(o[t.id])return;let d={id:t.id,current:t.current,meta:t.meta};if(v&&v in e.sidValuesMap&&!(v in e.sidIdMap))d.current=(e.fromSerialize&&g!=="ignore"&&(g==null?void 0:g.read)||Kt)(e.sidValuesMap[v]);else if(t.before&&!a){let S=0,c=n||!t.noInit||r;M(t.before,p=>{switch(p.type){case te:{let i=p.from;if(i||p.fn){i&&F(e,i,n,r);let s=i&&o[i.id].current;c&&(d.current=p.fn?p.fn(s):s)}break}case"field":S||(S=1,d.current=Array.isArray(d.current)?[...d.current]:{...d.current}),F(e,p.from,n,r),c&&(d.current[p.field]=o[o[p.from.id].id].current)}})}v&&(e.sidIdMap[v]=t.id),o[t.id]=d};const Ut=(e,t,n)=>{try{return t(X(n),e.scope,n)}catch(r){console.error(r),e.fail=1}};let K=(e,t={})=>(j(e)&&(K(e.or,t),bt(e,(n,r)=>{z(n)||r==="or"||r==="and"||(t[r]=n)}),K(e.and,t)),t);const tt=(e,t)=>{le(e.next,t),le(he(e),t),le(Se(e),t)},Te=(e,t,n)=>{let r;e.next.length=0,e.seq.length=0,e.scope=null;let a=Se(e);for(;r=a.pop();)tt(r,e),(t||n&&L(e,"op")!=="sample"||r.family.type==="crosslink")&&Te(r,t,L(r,"op")!=="on"&&n);for(a=he(e);r=a.pop();)tt(r,e),n&&r.family.type==="crosslink"&&Te(r,t,L(r,"op")!=="on"&&n)},J=e=>e.clear();let Ce=(e,{deep:t}={})=>{let n=0;if(e.ownerSet&&e.ownerSet.delete(e),$e(e))J(pe(e));else if(lt(e)){n=1;let r=e.history;J(r.events),J(r.effects),J(r.stores),J(r.domains)}Te(C(e),!!t,n)},mt=e=>{let t=()=>Ce(e);return t.unsubscribe=t,t},We=(e,t,n,r,a)=>$({node:n,parent:e,child:t,scope:{fn:a},meta:{op:r},family:{owners:[e,t],links:t},regional:1}),ht=(e,t)=>(P(V(t),".watch argument should be a function"),mt($({scope:{fn:t},node:[je({fn:Be})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),Yt=(e,t,n="event")=>{B(e)&&B(e).hooks[n](t)},St=(e,t,n)=>{let r=K(n),a=e==="domain",u=Dt(),{sid:o=null,named:v=null,domain:g=null,parent:d=g}=r,S=v||r.name||(a?"":u),c=Rt(S,d),p={op:t.kind=e,name:t.shortName=S,sid:t.sid=It(o),named:v,unitId:t.id=u,serialize:r.serialize,derived:r.derived,config:r};return t.parent=d,t.compositeName=c,t.defaultConfig=r,t.thru=i=>(ne(0,"thru","js pipe"),i(t)),t.getType=()=>c.fullName,!a&&(t.subscribe=i=>(Pt(i),t.watch(V(i)?i:s=>i.next&&i.next(s))),t[Lt]=()=>t),p};const Ae=(e,t,n,r)=>{let a;j(n)&&(a=n,n=n.fn);let u=x({name:`${e.shortName} → *`,derived:1,and:a});return We(e,u,r,t,n),u},yt=(e,t,n,r,a)=>{let u=de(t),o=ge({store:u,to:"a",priority:"read"});n===te&&(o.data.softRead=1);let v=[o,q(r)];return Q("storeOnMap",u,v,$e(e)&&de(e)),We(e,t,v,n,a)};let Jt=(e,t,n)=>{try{return[1,e(...n)]}catch(r){return t(r),[0,null]}},Qt=e=>{let t=I(e),n={ref:t};return t&&D(t.activeEffects,n),n},rt=(e,t,n,r,a,u)=>o=>{u.ref&&le(u.ref.activeEffects,u),ee({target:[r,Xt],params:[n?{status:"done",params:e,result:o}:{status:"fail",params:e,error:o},{value:o,fn:n?t.rs:t.rj}],defer:1,page:a.page,scope:u.ref,meta:a.meta})};const Xt=$({node:[je({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}}),Zt=st(()=>{window.isBackFromBrowser=!1,window.history.back()}),Ge=st(e=>{window.history.pushState(e,"")}),ve=x(),me=x(),He=x(),Fe=x(),Ke=x(),Ue=x(),gt=x(),_t=x(),er=Ie({activeView:null,activePanel:null,activeModal:null,activePopout:null,isRouteInit:!1}).on(ve,(e,t)=>({...e,activeView:t})).on(me,(e,t)=>({...e,activePanel:t})).on(He,(e,t)=>({...e,activeModal:t})).on(Ke,(e,t)=>({...e,activeModal:t})).on(Fe,(e,t)=>({...e,activePopout:t})).on(Ue,(e,t)=>({...e,activePopout:t})).on(_t,e=>({...e,isRouteInit:!0})).on(gt,(e,t)=>({...e,activeView:t.hasOwnProperty("view")?t.view:e.activeView,activePanel:t.hasOwnProperty("panel")?t.panel:e.activePanel,activeModal:t.hasOwnProperty("modal")?t.modal:e.activeModal,activePopout:t.hasOwnProperty("popout")?t.popout:e.activePopout}));function tr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nt={},rr={get exports(){return nt},set exports(e){nt=e}},Le={},ae={},nr={get exports(){return ae},set exports(e){ae=e}},xe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ot;function or(){if(ot)return xe;ot=1;var e=k;function t(c,p){return c===p&&(c!==0||1/c===1/p)||c!==c&&p!==p}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,a=e.useEffect,u=e.useLayoutEffect,o=e.useDebugValue;function v(c,p){var i=p(),s=r({inst:{value:i,getSnapshot:p}}),l=s[0].inst,f=s[1];return u(function(){l.value=i,l.getSnapshot=p,g(l)&&f({inst:l})},[c,i,p]),a(function(){return g(l)&&f({inst:l}),c(function(){g(l)&&f({inst:l})})},[c]),o(i),i}function g(c){var p=c.getSnapshot;c=c.value;try{var i=p();return!n(c,i)}catch{return!0}}function d(c,p){return p()}var S=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:v;return xe.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:S,xe}var ke={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var at;function ar(){return at||(at=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=k,t=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function n(w){{for(var m=arguments.length,_=new Array(m>1?m-1:0),h=1;h<m;h++)_[h-1]=arguments[h];r("error",w,_)}}function r(w,m,_){{var h=t.ReactDebugCurrentFrame,y=h.getStackAddendum();y!==""&&(m+="%s",_=_.concat([y]));var E=_.map(function(A){return String(A)});E.unshift("Warning: "+m),Function.prototype.apply.call(console[w],console,E)}}function a(w,m){return w===m&&(w!==0||1/w===1/m)||w!==w&&m!==m}var u=typeof Object.is=="function"?Object.is:a,o=e.useState,v=e.useEffect,g=e.useLayoutEffect,d=e.useDebugValue,S=!1,c=!1;function p(w,m,_){S||e.startTransition!==void 0&&(S=!0,n("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var h=m();if(!c){var y=m();u(h,y)||(n("The result of getSnapshot should be cached to avoid an infinite loop"),c=!0)}var E=o({inst:{value:h,getSnapshot:m}}),A=E[0].inst,U=E[1];return g(function(){A.value=h,A.getSnapshot=m,i(A)&&U({inst:A})},[w,h,m]),v(function(){i(A)&&U({inst:A});var _e=function(){i(A)&&U({inst:A})};return w(_e)},[w]),d(h),h}function i(w){var m=w.getSnapshot,_=w.value;try{var h=m();return!u(_,h)}catch{return!0}}function s(w,m,_){return m()}var l=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",f=!l,b=f?s:p,R=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:b;ke.useSyncExternalStore=R,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),ke}(function(e){process.env.NODE_ENV==="production"?e.exports=or():e.exports=ar()})(nr);const ir=tr(ae);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var it;function ur(){if(it)return Le;it=1;var e=k,t=ae;function n(d,S){return d===S&&(d!==0||1/d===1/S)||d!==d&&S!==S}var r=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,u=e.useRef,o=e.useEffect,v=e.useMemo,g=e.useDebugValue;return Le.useSyncExternalStoreWithSelector=function(d,S,c,p,i){var s=u(null);if(s.current===null){var l={hasValue:!1,value:null};s.current=l}else l=s.current;s=v(function(){function b(h){if(!R){if(R=!0,w=h,h=p(h),i!==void 0&&l.hasValue){var y=l.value;if(i(y,h))return m=y}return m=h}if(y=m,r(w,h))return y;var E=p(h);return i!==void 0&&i(y,E)?y:(w=h,m=E)}var R=!1,w,m,_=c===void 0?null:c;return[function(){return b(S())},_===null?void 0:function(){return b(_())}]},[S,c,p,i]);var f=a(d,s[0],s[1]);return o(function(){l.hasValue=!0,l.value=f},[f]),g(f),f},Le}var Me={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ut;function sr(){return ut||(ut=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=k,t=ae;function n(S,c){return S===c&&(S!==0||1/S===1/c)||S!==S&&c!==c}var r=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,u=e.useRef,o=e.useEffect,v=e.useMemo,g=e.useDebugValue;function d(S,c,p,i,s){var l=u(null),f;l.current===null?(f={hasValue:!1,value:null},l.current=f):f=l.current;var b=v(function(){var _=!1,h,y,E=function(Y){if(!_){_=!0,h=Y;var we=i(Y);if(s!==void 0&&f.hasValue){var Ee=f.value;if(s(Ee,we))return y=Ee,Ee}return y=we,we}var Ot=h,Oe=y;if(r(Ot,Y))return Oe;var be=i(Y);return s!==void 0&&s(Oe,be)?Oe:(h=Y,y=be,be)},A=p===void 0?null:p,U=function(){return E(c())},_e=A===null?void 0:function(){return E(A())};return[U,_e]},[c,p,i,s]),R=b[0],w=b[1],m=a(S,R,w);return o(function(){f.hasValue=!0,f.value=m},[m]),g(m),m}Me.useSyncExternalStoreWithSelector=d,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Me}(function(e){process.env.NODE_ENV==="production"?e.exports=ur():e.exports=sr()})(rr);function lr(e,t,n,r){let a=[zt.run({fn:u=>t(u)})];if(r&&a.unshift(r),n){let u=$({node:a}),o=e.graphite.id,v=n.additionalLinks,g=v[o]||[];return v[o]=g,g.push(u),()=>{let d=g.indexOf(u);d!==-1&&g.splice(d,1),Ce(u)}}{let u=$({node:a,parent:[e],family:{owners:e}});return()=>{Ce(u)}}}function cr(e,t){Vt.store(e)||wt("expect useStore argument to be a store");let n=k.useCallback(a=>lr(e,a,t),[e,t]),r=k.useCallback(()=>vr(e,t),[e,t]);return pr(n,r,r)}function fr(e){let t=k.useContext(mr);return e&&!t&&wt("No scope found, consider adding <Provider> to app root"),t}function dr(e,t){return cr(e,fr(t==null?void 0:t.forceScope))}let wt=e=>{throw Error(e)};typeof window<"u"?k.useLayoutEffect:k.useEffect;const{useSyncExternalStore:pr}=ir,vr=(e,t)=>t?t.getState(e):e.getState(),mr=k.createContext(null),hr=(e,t,n)=>{k.useEffect(()=>{const r=a=>{a instanceof KeyboardEvent&&a.key===n?t(a):n||t(a)};return window.addEventListener(e,r),()=>window.removeEventListener(e,r)},[e,n,t])},Sr=(e,...t)=>{const{activeView:n,activePanel:r,activeModal:a,activePopout:u,isRouteInit:o}=Et();k.useEffect(()=>{o||(ve(e.view),me(e.panel),e.modal&&He(e.modal),e.popout&&Fe(e.popout),_t())},[o,e.view,e.panel,e.modal,e.popout]),k.useEffect(()=>{const v=window.history.state??{view:void 0,panel:void 0,modal:void 0,popout:void 0};o&&(v.view!==n||v.panel!==r||v.modal!==a||v.popout!==u)&&Ge({view:n,panel:r,modal:a,popout:u})},[n,r,a,u,o]),hr("popstate",async()=>{o&&(await(async()=>{const{view:g,panel:d,modal:S,popout:c}=window.history.state??{view:void 0,panel:void 0,modal:void 0,popout:void 0};console.log("prevRoutes",g,d,S,c),console.log("storeRoutes",n,r,a,u);for(const p in t)if(!await t[p]({view:n,panel:r,modal:a,popout:u},{view:g,panel:d,modal:S,popout:c}))return;ve(g),me(d),Ke(S),Ue(c)})(),window.isBackFromBrowser=!0)})},Et=()=>dr(er),yr=e=>e,gr=(e,t)=>(n,r)=>["view","panel","modal","popout"].some(u=>n[u]===e&&n[u]!==r[u])&&window.isBackFromBrowser?(t&&t(n,r),Ge(n),!1):!0;exports._setActiveModal=Ke;exports._setActivePopout=Ue;exports.back=Zt;exports.createDisableBackBrowserRouteMiddleware=gr;exports.createRouteMiddleware=yr;exports.historyPush=Ge;exports.setActiveModal=He;exports.setActivePanel=me;exports.setActivePopout=Fe;exports.setActiveView=ve;exports.setRoutes=gt;exports.useInitRouter=Sr;exports.useRouter=Et;
